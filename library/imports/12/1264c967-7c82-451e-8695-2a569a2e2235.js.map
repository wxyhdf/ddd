{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\camera.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    robot: cc.Node = null;\r\n    /**\r\n    * 屏幕监听开始点\r\n    */\r\n    start_Lisence_PointY: number = 0;\r\n\r\n    //屏幕点击起始点\r\n    touch_Start_Point: cc.Vec2 = cc.v2(0, 0);\r\n    robot_Pre_Point: cc.Vec2 = cc.v2(0, 0);\r\n    init() {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, (ev) => {\r\n            let pos = ev.getLocation() as cc.Vec2;\r\n            this.touch_Start_Point = pos;\r\n        });\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, (ev) => {\r\n            let pos = ev.getLocation() as cc.Vec2;\r\n            if (this.touch_Start_Point.x == pos.x) return;\r\n            let per = (pos.x - this.touch_Start_Point.x) * 0.6 + this.robot.x;\r\n            //this.robot_Pre_Point = this.node.convertToWorldSpaceAR(this.robot.position);\r\n            let visi = cc.view.getVisibleSize();\r\n\r\n            if (per >= visi.width / 2 - this.robot.width / 2) per = visi.width / 2 - this.robot.width / 2;\r\n            if (per <= -visi.width / 2 + this.robot.width / 2) per = -visi.width / 2 + this.robot.width / 2;\r\n            this.robot.setPosition(per, this.robot.y);\r\n            // let rigidbody = this.robot.getComponent(cc.RigidBody);\r\n            // rigidbody.linearVelocity = cc.v2(300, -640);\r\n            this.touch_Start_Point = pos;\r\n        });\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, (ev) => {\r\n\r\n        });\r\n    }\r\n    start() {\r\n        this.start_Lisence_PointY = this.robot.y - this.robot.height / 2;\r\n        //this.init();\r\n    }\r\n    /**\r\n     * 相机移动flag\r\n     */\r\n    flag: boolean = false;\r\n    lateUpdate() {\r\n        if (this.robot.y > this.node.y) {\r\n            this.flag = true;\r\n            //this.node.setPosition(0, this.robot.y);\r\n        }\r\n        if (this.robot.y < this.node.y && this.flag) {\r\n            this.node.setPosition(0, this.robot.y);\r\n        }\r\n        if (this.robot.y <= this.start_Lisence_PointY) {\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}